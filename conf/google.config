docker.enabled = true

params {
  executor = 'google-lifesciences'
}

google {
    lifeSciences.bootDiskSize = params.gls_bootDiskSize
    lifeSciences.preemptible = params.gls_preemptible
    zone = params.zone
    network = params.network
    subnetwork = params.subnetwork
}

process {
  process.container = "quay.io/lifebitai/nano-compare"

  withLabel: with_gpus {
    cpus = params.with_gpus_process_cpus
    memory =  params.with_gpus_process_memory
    containerOptions = params.containerOptions
    accelerator = [request: params.n_accelerators, type: params.accelerator ]
    params.GuppyDir="/usr"
    params.GuppyGPUOptions="--gpu_runners_per_device 1 --device auto"
    params.isgpu = 'yes'
	}
}

